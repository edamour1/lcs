<?xml version="1.0" encoding="UTF-8"?>
<sql>
    <!--*************************************************Invoice Information************************************************************-->
    <getInvoiceInformationByAddress>
        <![CDATA[
            select * from invoice_information where address_id = ?
        ]]>
    </getInvoiceInformationByAddress>

    <getAllInvoiceInformations>
        <![CDATA[
            SELECT id, payment_due_date, start_date, end_date, client_id, notes
            FROM INVOICE_INFORMATION
            ]]>
    </getAllInvoiceInformations>

    <getInvoiceInformationByClientId>
        <![CDATA[
            SELECT id, payment_due_date, start_date, end_date, client_id, notes, address_id, invoice_no
                FROM INVOICE_INFORMATION
                    WHERE client_id = ?
        ]]>
    </getInvoiceInformationByClientId>

    <saveInvoiceInformation>
        <![CDATA[
            INSERT INTO `INVOICE_INFORMATION` (
            `payment_due_date`,
            `start_date`,
            `end_date`,
            `client_id`,
            `notes`,
            `additional_services_list_id`,
            `treatment_list_id`,
            `address_id`,
            `lm_user_id`,
            `invoice_no`,
            `lm_date`
        ) VALUES (
            ?,
            ?,
            ?,
            ?,
            ?,
            ?,
            ?,
            ?,
            ?,
            ?,
            NOW())
        ]]>
    </saveInvoiceInformation>

    <saveTreatmentForInvoiceInformation>
        <![CDATA[
            INSERT INTO `treatment_list` (`id`,`treatment_id`,`quantity`)
            VALUES (?,
                    ? ,
                    ?)
        ]]>
    </saveTreatmentForInvoiceInformation>

    <saveAdditionalCostServiceForInvoiceInformation>
        <![CDATA[
            INSERT INTO `ADDITIONAL_SERVICES_LIST` (`id`,`additional_service_id`,`quantity`)
            VALUES (?,?,?)
        ]]>
    </saveAdditionalCostServiceForInvoiceInformation>

    <updateInvoiceInformation>
        <![CDATA[
            UPDATE INVOICE_INFORMATION

            SET
                payment_due_date = ?,
                start_date = ?,
                end_date = ?,
                notes = ?,
                lm_user_id = ?,
                lm_date = Now()
            WHERE id = ?
        ]]>
    </updateInvoiceInformation>

<!--**************************************************************Address***************************************************************-->
    <saveAddress>
        <![CDATA[
             INSERT INTO addresses (client_id, street, city_id, state_id, zipcode_id, is_active)
             VALUES (?, ?, ?, ?, ?, ?)
        ]]>
    </saveAddress>

    <updateAddress>
        <![CDATA[
            UPDATE addresses
                SET
                    street = ?,
                    city_id = ?,
                    state_id = ?,
                    zipcode_id = ?,
                    is_active = ?
                        WHERE
                            id = ?
        ]]>
    </updateAddress>

    <getAddresses>
        <![CDATA[
            SELECT
                ADDRESSES.id AS AddressID,
                ADDRESSES.street AS Address,
                is_active,
                CITIES.id AS CityID,
                CITIES.city AS City,
                STATES.id AS StateID,
                STATES.state AS State,
                ZIPCODES.id AS ZipCodeID,
                ZIPCODES.zipcode AS ZipCode
            FROM
                ADDRESSES
            JOIN
                CITIES ON ADDRESSES.city_id = CITIES.id
            JOIN
                STATES ON ADDRESSES.state_id = STATES.id
            JOIN
                ZIPCODES ON ADDRESSES.zipcode_id = ZIPCODES.id
        ]]>
    </getAddresses>

    <getAddressesByClientId>
        <![CDATA[
            SELECT
                ADDRESSES.id AS AddressID,
                ADDRESSES.street AS Address,
                is_active,
                CITIES.id AS CityID,
                CITIES.city AS City,
                STATES.id AS StateID,
                STATES.state AS State,
                ZIPCODES.id AS ZipCodeID,
                ZIPCODES.zipcode AS ZipCode
            FROM
                ADDRESSES
            JOIN
                CITIES ON ADDRESSES.city_id = CITIES.id
            JOIN
                STATES ON ADDRESSES.state_id = STATES.id
            JOIN
                ZIPCODES ON ADDRESSES.zipcode_id = ZIPCODES.id
            WHERE
                ADDRESSES.client_id = ?
        ]]>
    </getAddressesByClientId>

    <getAddressesByInvoiceInformation>
        <![CDATA[
                       SELECT
                ADDRESSES.id AS AddressID,
                ADDRESSES.street AS Address,
                ADDRESSES.is_active,
                CITIES.id AS CityID,
                CITIES.city AS City,
                STATES.id AS StateID,
                STATES.state AS State,
                ZIPCODES.id AS ZipCodeID,
                ZIPCODES.zipcode AS ZipCode
            FROM
                ADDRESSES
            JOIN
                CITIES ON ADDRESSES.city_id = CITIES.id
            JOIN
                STATES ON ADDRESSES.state_id = STATES.id
            JOIN
                ZIPCODES ON ADDRESSES.zipcode_id = ZIPCODES.id
            JOIN
                INVOICE_INFORMATION ON ADDRESSES.id = INVOICE_INFORMATION.address_id
            WHERE
                ADDRESSES.id = ?
        ]]>
    </getAddressesByInvoiceInformation>

    <doesAddressExists>
        <![CDATA[
            SELECT
                ADDRESSES.id AS AddressID,
                ADDRESSES.street AS Address,
                is_active,
                CITIES.id AS CityID,
                CITIES.city AS City,
                STATES.id AS StateID,
                STATES.state AS State,
                ZIPCODES.id AS ZipCodeID,
                ZIPCODES.zipcode AS ZipCode
            FROM
                ADDRESSES
            JOIN
                CITIES ON ADDRESSES.city_id = CITIES.id
            JOIN
                STATES ON ADDRESSES.state_id = STATES.id
            JOIN
                ZIPCODES ON ADDRESSES.zipcode_id = ZIPCODES.id
            WHERE
                ADDRESSES.street = ?
        ]]>
    </doesAddressExists>
<!--******************************************************************Treatment**********************************************************-->
    <getTreatmentById>
        <![CDATA[
            SELECT * FROM treatments
            WHERE id = ?
        ]]>
    </getTreatmentById>

    <getAllTreatments>
        <![CDATA[
            SELECT * FROM treatments
        ]]>
    </getAllTreatments>

    <getTreatmentsByClientId>
        <![CDATA[
            SELECT TREATMENTS.*,TREATMENT_LIST.quantity
            FROM TREATMENTS
            JOIN TREATMENT_LIST ON TREATMENTS.id = TREATMENT_LIST.treatment_id
            JOIN INVOICE_INFORMATION ON INVOICE_INFORMATION.additional_services_list_id = TREATMENT_LIST.id
            WHERE INVOICE_INFORMATION.additional_services_list_id = ?
        ]]>
    </getTreatmentsByClientId>

    <updateTreatment>
        <![CDATA[
                UPDATE TREATMENTS
                    SET treatment_name = ?,
                    treatment_description = ?,
                    price = ?
                    WHERE id = ?
        ]]>
    </updateTreatment>

    <saveTreatment>
        <![CDATA[
            INSERT INTO TREATMENTS (treatment_name, treatment_description, price)
            VALUES(?,?,?)
        ]]>
    </saveTreatment>

    <removeTreatmentFromList>
        <![CDATA[
            DELETE FROM treatment_list
            WHERE id = ?
            AND   treatment_id = ?
        ]]>
    </removeTreatmentFromList>
<!--**************************************************************States****************************************************-->
    <getAllStates>
        <![CDATA[
            SELECT * FROM states
        ]]>
    </getAllStates>
<!--***************************************************************Cities*********************************************************************************-->
    <getCities>
        <![CDATA[
            SELECT * FROM cities
        ]]>
    </getCities>

    <getCity>
        <![CDATA[
            SELECT * FROM cities
            WHERE city = ?
        ]]>
    </getCity>

    <saveCity>
        <![CDATA[
            INSERT INTO cities (city) VALUES (?)
        ]]>
    </saveCity>
<!--*************************************************************Additional Cost Services*****************************************************************-->
    <getAllAdditionalCostServices>
        <![CDATA[
            SELECT * FROM ADDITIONAL_SERVICES
        ]]>
    </getAllAdditionalCostServices>..........

    <getAdditionalCostServicesById>
        <![CDATA[
            SELECT * FROM additional_services
            WHERE id = ?
        ]]>
    </getAdditionalCostServicesById>

    <getAdditionalCostServicesByClientId>
        <![CDATA[
            SELECT ADDITIONAL_SERVICES.* , ADDITIONAL_SERVICES_LIST.quantity
                FROM ADDITIONAL_SERVICES
                JOIN ADDITIONAL_SERVICES_LIST ON ADDITIONAL_SERVICES.id = ADDITIONAL_SERVICES_LIST.additional_service_id
                JOIN INVOICE_INFORMATION ON INVOICE_INFORMATION.additional_services_list_id = ADDITIONAL_SERVICES_LIST.id
                WHERE INVOICE_INFORMATION.additional_services_list_id =  ?
        ]]>
    </getAdditionalCostServicesByClientId>

    <saveAdditionalCostService>
        <![CDATA[
            INSERT INTO `ADDITIONAL_SERVICES` (`treatment_name`, `treatment_description`, `price`)
            VALUES(?,?,?)
        ]]>
    </saveAdditionalCostService>

    <updateAdditionalCostService>
        <![CDATA[
            UPDATE `ADDITIONAL_SERVICES`
                SET `treatment_name` = ?,
                    `treatment_description` = ?,
                    `price` = ?
                    WHERE `id` = ?
        ]]>
    </updateAdditionalCostService>

    <removeAdditionalCostServiceFromList>
        <![CDATA[
            DELETE FROM ADDITIONAL_SERVICES_LIST
            WHERE id = ?
            AND additional_service_id = ?
        ]]>
    </removeAdditionalCostServiceFromList>
    <!--****************Admin*******************************************************************-->
    <getAllAdmin>
        <![CDATA[
            SELECT * FROM admin
        ]]>
    </getAllAdmin>

    <getAdminById>
        <![CDATA[
            SELECT * FROM admin
            WHERE id = ?
        ]]>
    </getAdminById>

    <saveAdmin>
            <![CDATA[
                INSERT INTO `ADMIN` (`username`, `password`, `role`, `hint`)
                VALUES(?, ?, ?, ?)
            ]]>
        </saveAdmin>

    <!--**************************************************************Client***********************************************************************-->
    <saveClient>
        <![CDATA[
            INSERT INTO `CLIENTS` (`first_name`, `middle_name`, `last_name`, `email`, `phone_number`)
            VALUES(?, ?, ?, ?, ?)
        ]]>
    </saveClient>

    <updateClient>
        <![CDATA[
            UPDATE clients
                SET
                  first_name = ?,
                  middle_name = ?,
                  last_name = ?,
                  email = ?,
                  phone_number = ?
                WHERE
                  id = ?
        ]]>
    </updateClient>

    <getClientById>
        <![CDATA[
            SELECT * FROM clients
            where id = ?
        ]]>
    </getClientById>

    <getClients>
        <![CDATA[ SELECT * FROM clients ]]>
    </getClients>
<!--*********************************************************Zipcodes************************************************************-->
    <getAllZipcodes>
        <![CDATA[
            SELECT * FROM zipcodes
        ]]>
    </getAllZipcodes>

    <getZipcodesByCity>
        <![CDATA[
            SELECT zipcodes.id, ZIPCODES.zipcode
                FROM CITIES
                    JOIN ZIPCODES ON CITIES.id = ZIPCODES.city_id
                WHERE CITIES.city = ?
        ]]>
    </getZipcodesByCity>

    <getZipcodesById>
        <![CDATA[
            SELECT * FROM zipcodes
            WHERE id = ?
        ]]>
    </getZipcodesById>

    <saveZipcode>
        <![CDATA[
            INSERT INTO zipcodes (zipcode, city_id) VALUES (?, ?)
        ]]>
    </saveZipcode>
</sql>
